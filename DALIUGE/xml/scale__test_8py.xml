<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="scale__test_8py" kind="file" language="Python">
    <compoundname>scale_test.py</compoundname>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" prot="public">dlg::deploy::pawsey::scale_test::DefaultConfig</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyMWAConfig" prot="public">dlg::deploy::pawsey::scale_test::GalaxyMWAConfig</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyASKAPConfig" prot="public">dlg::deploy::pawsey::scale_test::GalaxyASKAPConfig</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1MagnusConfig" prot="public">dlg::deploy::pawsey::scale_test::MagnusConfig</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1TianHe2Config" prot="public">dlg::deploy::pawsey::scale_test::TianHe2Config</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1ConfigFactory" prot="public">dlg::deploy::pawsey::scale_test::ConfigFactory</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient" prot="public">dlg::deploy::pawsey::scale_test::PawseyClient</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair" prot="public">dlg::deploy::pawsey::scale_test::LogEntryPair</innerclass>
    <innerclass refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser" prot="public">dlg::deploy::pawsey::scale_test::LogParser</innerclass>
    <innernamespace refid="namespacedlg_1_1deploy_1_1pawsey_1_1scale__test">dlg::deploy::pawsey::scale_test</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>ICRAR<sp/>-<sp/>International<sp/>Centre<sp/>for<sp/>Radio<sp/>Astronomy<sp/>Research</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>(c)<sp/>UWA<sp/>-<sp/>The<sp/>University<sp/>of<sp/>Western<sp/>Australia,<sp/>2016</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>Copyright<sp/>by<sp/>UWA<sp/>(in<sp/>the<sp/>framework<sp/>of<sp/>the<sp/>ICRAR)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>All<sp/>rights<sp/>reserved</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>This<sp/>library<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>modify<sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>Lesser<sp/>General<sp/>Public</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>License<sp/>as<sp/>published<sp/>by<sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>version<sp/>2.1<sp/>of<sp/>the<sp/>License,<sp/>or<sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="comment">#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>This<sp/>library<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the<sp/>GNU</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>Lesser<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="comment">#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>Lesser<sp/>General<sp/>Public</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>License<sp/>along<sp/>with<sp/>this<sp/>library;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>Foundation,<sp/>Inc.,<sp/>59<sp/>Temple<sp/>Place,<sp/>Suite<sp/>330,<sp/>Boston,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="comment">#<sp/><sp/><sp/><sp/>MA<sp/>02111-1307<sp/><sp/>USA</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight><highlight class="comment">#</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="23"><highlight class="stringliteral">Generate<sp/>the<sp/>SLURM<sp/>script,<sp/>and<sp/>submit<sp/>it<sp/>to<sp/>the<sp/>queue<sp/>based<sp/>on<sp/>various<sp/>paramters</highlight></codeline>
<codeline lineno="24"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="25"><highlight class="stringliteral">parse<sp/>the<sp/>log<sp/>result,<sp/>and<sp/>produce<sp/>the<sp/>plot</highlight></codeline>
<codeline lineno="26"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="27"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>datetime</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>optparse</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>os</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>pwd</highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>re</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>socket</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>string</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>subprocess</highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>sys</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>time</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>...<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>utils</highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>...runtime<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>__git_version__<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>git_commit</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal">sub_tpl_str<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;#!/bin/bash<sp/>--login</highlight></codeline>
<codeline lineno="45"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="46"><highlight class="stringliteral">#SBATCH<sp/>--nodes=$NUM_NODES</highlight></codeline>
<codeline lineno="47"><highlight class="stringliteral">#SBATCH<sp/>--ntasks-per-node=1</highlight></codeline>
<codeline lineno="48"><highlight class="stringliteral">#SBATCH<sp/>--job-name=DALiuGE-$PIP_NAME</highlight></codeline>
<codeline lineno="49"><highlight class="stringliteral">#SBATCH<sp/>--time=$JOB_DURATION</highlight></codeline>
<codeline lineno="50"><highlight class="stringliteral">#SBATCH<sp/>--account=$ACCOUNT</highlight></codeline>
<codeline lineno="51"><highlight class="stringliteral">#SBATCH<sp/>--error=err-%j.log</highlight></codeline>
<codeline lineno="52"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="53"><highlight class="stringliteral">module<sp/>swap<sp/>PrgEnv-cray<sp/>PrgEnv-gnu</highlight></codeline>
<codeline lineno="54"><highlight class="stringliteral">module<sp/>load<sp/>python/2.7.10</highlight></codeline>
<codeline lineno="55"><highlight class="stringliteral">module<sp/>load<sp/>mpi4py</highlight></codeline>
<codeline lineno="56"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="57"><highlight class="stringliteral">aprun<sp/>-b<sp/>-n<sp/>$NUM_NODES<sp/>-N<sp/>1<sp/>$PY_BIN<sp/>-m<sp/>dlg.deploy.pawsey.start_dfms_cluster<sp/>-l<sp/>$LOG_DIR<sp/>$GRAPH_PAR<sp/>$PROXY_PAR<sp/>$GRAPH_VIS_PAR<sp/>$LOGV_PAR<sp/>$ZERORUN_PAR<sp/>$MAXTHREADS_PAR<sp/>$SNC_PAR<sp/>$NUM_ISLANDS_PAR<sp/>$ALL_NICS<sp/>$CHECK_WITH_SESSION</highlight></codeline>
<codeline lineno="58"><highlight class="stringliteral">&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal">sub_tpl<sp/>=<sp/>string.Template(sub_tpl_str)</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal">default_aws_mon_host<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;sdp-dfms.ddns.net&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal">default_aws_mon_port<sp/>=<sp/>8898</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" kindref="compound">DefaultConfig</ref>(object):</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig_1a90cfc35598ef45ffed2e458e0e1f260a" kindref="member">_dict</ref><sp/>=<sp/>dict()</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>l<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig_1ab4153d409742e163bdc5f792f348cbcd" kindref="member">init_list</ref>()</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig_1af3163621ac0b3c54ce2d3543a6a22df7" kindref="member">setpar</ref>(</highlight><highlight class="stringliteral">&apos;acc&apos;</highlight><highlight class="normal">,<sp/>l[0])</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig_1af3163621ac0b3c54ce2d3543a6a22df7" kindref="member">setpar</ref>(</highlight><highlight class="stringliteral">&apos;log_root&apos;</highlight><highlight class="normal">,<sp/>l[1])</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">init_list(self):</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">pass</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">setpar(self,<sp/>k,<sp/>v):</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._dict[k]<sp/>=<sp/>v</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">getpar(self,<sp/>k):</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>self._dict.get(k)</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyMWAConfig" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyMWAConfig" kindref="compound">GalaxyMWAConfig</ref>(<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" kindref="compound">DefaultConfig</ref>):</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super(GalaxyMWAConfig,<sp/>self).__init__()</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">init_list(self):</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;mwaops&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;/group/mwaops/cwu/dfms/logs&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyASKAPConfig" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1GalaxyASKAPConfig" kindref="compound">GalaxyASKAPConfig</ref>(<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" kindref="compound">DefaultConfig</ref>):</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super(GalaxyASKAPConfig,<sp/>self).__init__()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">init_list(self):</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;astronomy856&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;/group/astronomy856/cwu/dfms/logs&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1MagnusConfig" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1MagnusConfig" kindref="compound">MagnusConfig</ref>(<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" kindref="compound">DefaultConfig</ref>):</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super(MagnusConfig,<sp/>self).__init__()</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">init_list(self):</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;pawsey0129&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;/group/pawsey0129/daliuge_logs&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight></codeline>
<codeline lineno="102" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1TianHe2Config" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1TianHe2Config" kindref="compound">TianHe2Config</ref>(<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1DefaultConfig" kindref="compound">DefaultConfig</ref>):</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self):</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super(TianHe2Config,<sp/>self).__init__()</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">init_list(self):<sp/></highlight><highlight class="comment">#TODO<sp/>please<sp/>fill<sp/>in</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[</highlight><highlight class="stringliteral">&apos;SHAO&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;/group/shao/daliuge_logs&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1ConfigFactory" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1ConfigFactory" kindref="compound">ConfigFactory</ref>():</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>mapping<sp/>=<sp/>{</highlight><highlight class="stringliteral">&apos;galaxy_mwa&apos;</highlight><highlight class="normal">:GalaxyMWAConfig,<sp/></highlight><highlight class="stringliteral">&apos;galaxy_askap&apos;</highlight><highlight class="normal">:GalaxyASKAPConfig,</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;magnus&apos;</highlight><highlight class="normal">:MagnusConfig,<sp/></highlight><highlight class="stringliteral">&apos;galaxy&apos;</highlight><highlight class="normal">:GalaxyASKAPConfig}</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/>@staticmethod</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">create_config(facility=None):</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facility<sp/>=<sp/>facility.lower()<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(facility<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>facility</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ConfigFactory.mapping.get(facility)()</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient" kindref="compound">PawseyClient</ref>(object):</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="120"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>parameters<sp/>we<sp/>can<sp/>control:</highlight></codeline>
<codeline lineno="121"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="122"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>1.<sp/>Pawsey<sp/>group<sp/>/<sp/>account<sp/>name<sp/>(Required)</highlight></codeline>
<codeline lineno="123"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>2.<sp/>whether<sp/>to<sp/>submit<sp/>a<sp/>graph,<sp/>and<sp/>if<sp/>so<sp/>provide<sp/>graph<sp/>path</highlight></codeline>
<codeline lineno="124"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>3.<sp/>#<sp/>of<sp/>nodes<sp/>(of<sp/>Drop<sp/>Managers)</highlight></codeline>
<codeline lineno="125"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>4.<sp/>how<sp/>long<sp/>to<sp/>run</highlight></codeline>
<codeline lineno="126"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>5.<sp/>whether<sp/>to<sp/>produce<sp/>offline<sp/>graph<sp/>vis</highlight></codeline>
<codeline lineno="127"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>6.<sp/>whether<sp/>to<sp/>attach<sp/>proxy<sp/>for<sp/>remote<sp/>monitoring,<sp/>and<sp/>if<sp/>so<sp/>provide</highlight></codeline>
<codeline lineno="128"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLG_MON_HOST</highlight></codeline>
<codeline lineno="129"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>DLG_MON_PORT</highlight></codeline>
<codeline lineno="130"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>7.<sp/>Root<sp/>directory<sp/>of<sp/>the<sp/>Log<sp/>files<sp/>(Required)</highlight></codeline>
<codeline lineno="131"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>log_root=None,<sp/>acc=None,</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pg=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,<sp/>lg=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_dur=30,</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_nodes=5,</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_proxy=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mon_host=default_aws_mon_host,</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mon_port=default_aws_mon_port,</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logv=1,</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facility=socket.gethostname().split(</highlight><highlight class="stringliteral">&apos;-&apos;</highlight><highlight class="normal">)[0],</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zerorun=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_threads=0,</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sleepncopy=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_islands=1,</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>all_nics=</highlight><highlight class="keyword">False</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_with_session=</highlight><highlight class="keyword">False</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1aaa1c8114832577f34dc7de58b3c468bd" kindref="member">_config</ref><sp/>=<sp/>ConfigFactory.create_config(facility=facility)</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a5073e00938f6cee91ab93c29db2e6fdb" kindref="member">_acc</ref><sp/>=<sp/>self._config.getpar(</highlight><highlight class="stringliteral">&apos;acc&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(acc<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>acc</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1abcec370e3a0e3c2d05247ee9a27b8ef2" kindref="member">_log_root</ref><sp/>=<sp/>self._config.getpar(</highlight><highlight class="stringliteral">&apos;log_root&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(log_root<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>log_root</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ab0a1d5565c948df14aaa9251e58b6a08" kindref="member">_num_nodes</ref><sp/>=<sp/>num_nodes</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae7ac117f95972ac824856531281d3616" kindref="member">_job_dur</ref><sp/>=<sp/>job_dur</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a16649654c39d3519b0909f76aa2dcd68" kindref="member">_lg</ref><sp/>=<sp/>lg</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a12288d037712b64e1c464968d65d4a93" kindref="member">_pg</ref><sp/>=<sp/>pg</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a3528a7188bef5b42815459c4c1014a0b" kindref="member">_graph_vis</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a8631a15043c0905b1c28089ad4022cfe" kindref="member">_run_proxy</ref><sp/>=<sp/>run_proxy</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a1e47d707649a652263dbf18f267f72f7" kindref="member">_mon_host</ref><sp/>=<sp/>mon_host</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ad9893991569962c299e5d0d8b334ed92" kindref="member">_mon_port</ref><sp/>=<sp/>mon_port</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a245e091f37fce299d425c32453fb46da" kindref="member">_pip_name</ref><sp/>=<sp/>utils.fname_to_pipname(lg<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>pg)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lg<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>pg<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;None&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a7794b4e50ff43d0670ce855baaf6a2e4" kindref="member">_logv</ref><sp/>=<sp/>logv</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a116f45249ee60d4c7209bf4f43418653" kindref="member">_zerorun</ref><sp/>=<sp/>zerorun</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae1fd40b5f8803026a6caba6309e6e21f" kindref="member">_max_threads</ref><sp/>=<sp/>max_threads</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1aea3145a4cefe2b4cf7c96cb0e4670616" kindref="member">_sleepncopy</ref><sp/>=<sp/>sleepncopy</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1acf0ddeba657fc6f8e032121e58e68435" kindref="member">_num_islands</ref><sp/>=<sp/>num_islands</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae961904f66cb0c6ae1c1b34aefe8b0b1" kindref="member">_all_nics</ref><sp/>=<sp/>all_nics</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1af59363c727aa0e2ee352541778236826" kindref="member">_check_with_session</ref><sp/>=<sp/>check_with_session</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/>@property</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">num_daliuge_nodes(self):</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a8631a15043c0905b1c28089ad4022cfe" kindref="member">_run_proxy</ref>):</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ab0a1d5565c948df14aaa9251e58b6a08" kindref="member">_num_nodes</ref><sp/>-<sp/>1<sp/></highlight><highlight class="comment">#<sp/>exclude<sp/>the<sp/>proxy<sp/>node</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ab0a1d5565c948df14aaa9251e58b6a08" kindref="member">_num_nodes</ref><sp/>-<sp/>0<sp/></highlight><highlight class="comment">#<sp/>exclude<sp/>the<sp/>data<sp/>island<sp/>node?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>&lt;=<sp/>0):</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&quot;Not<sp/>enough<sp/>nodes<sp/>{0}<sp/>to<sp/>run<sp/>DALiuGE.&quot;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ab0a1d5565c948df14aaa9251e58b6a08" kindref="member">_num_nodes</ref>))</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ac6e45f15dcdcdd37eb71559b7dbd9756" kindref="member">get_log_dirname</ref>(self):</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="180"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(pipeline<sp/>name_)[Nnum_of_daliuge_nodes]_[time_stamp]</highlight></codeline>
<codeline lineno="181"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dtstr<sp/>=<sp/>datetime.datetime.now().strftime(</highlight><highlight class="stringliteral">&quot;%Y-%m-%dT%H-%M-%S&quot;</highlight><highlight class="normal">)<sp/></highlight><highlight class="comment">#.%f</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;{0}_N{1}_{2}&quot;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a245e091f37fce299d425c32453fb46da" kindref="member">_pip_name</ref>,<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a2aefe430f6146e1da9a4c7a7406d1f1b" kindref="member">num_daliuge_nodes</ref>,<sp/>dtstr)</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a754de02aeab53afdbe1a288d890f7924" kindref="member">label_job_dur</ref>(self):</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="187"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.g.<sp/>135<sp/>min<sp/>--&gt;<sp/>02:15:00</highlight></codeline>
<codeline lineno="188"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>seconds<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae7ac117f95972ac824856531281d3616" kindref="member">_job_dur</ref><sp/>*<sp/>60</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m,<sp/>s<sp/>=<sp/>divmod(seconds,<sp/>60)</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>h,<sp/>m<sp/>=<sp/>divmod(m,<sp/>60)</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;%02d:%02d:%02d&quot;</highlight><highlight class="normal"><sp/>%<sp/>(h,<sp/>m,<sp/>s)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">submit_job(self):</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lgdir<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;{0}/{1}&apos;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1abcec370e3a0e3c2d05247ee9a27b8ef2" kindref="member">_log_root</ref>,<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ac6e45f15dcdcdd37eb71559b7dbd9756" kindref="member">get_log_dirname</ref>())</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(lgdir)):</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.makedirs(lgdir)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict<sp/>=<sp/>dict()</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;NUM_NODES&apos;</highlight><highlight class="normal">]<sp/>=<sp/>str(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ab0a1d5565c948df14aaa9251e58b6a08" kindref="member">_num_nodes</ref>)</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;PIP_NAME&apos;</highlight><highlight class="normal">]<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a245e091f37fce299d425c32453fb46da" kindref="member">_pip_name</ref></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;JOB_DURATION&apos;</highlight><highlight class="normal">]<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a754de02aeab53afdbe1a288d890f7924" kindref="member">label_job_dur</ref>()</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;ACCOUNT&apos;</highlight><highlight class="normal">]<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a5073e00938f6cee91ab93c29db2e6fdb" kindref="member">_acc</ref></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;PY_BIN&apos;</highlight><highlight class="normal">]<sp/>=<sp/>sys.executable</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;LOG_DIR&apos;</highlight><highlight class="normal">]<sp/>=<sp/>lgdir</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;GRAPH_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-L<sp/>&quot;{0}&quot;&apos;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a16649654c39d3519b0909f76aa2dcd68" kindref="member">_lg</ref>)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a16649654c39d3519b0909f76aa2dcd68" kindref="member">_lg</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;-P<sp/>&quot;{0}&quot;&apos;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a12288d037712b64e1c464968d65d4a93" kindref="member">_pg</ref>)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a12288d037712b64e1c464968d65d4a93" kindref="member">_pg</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;PROXY_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-m<sp/>%s<sp/>-o<sp/>%d&apos;</highlight><highlight class="normal"><sp/>%<sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a1e47d707649a652263dbf18f267f72f7" kindref="member">_mon_host</ref>,<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ad9893991569962c299e5d0d8b334ed92" kindref="member">_mon_port</ref>)<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a8631a15043c0905b1c28089ad4022cfe" kindref="member">_run_proxy</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;GRAPH_VIS_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-d&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a3528a7188bef5b42815459c4c1014a0b" kindref="member">_graph_vis</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;LOGV_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-v<sp/>%d&apos;</highlight><highlight class="normal"><sp/>%<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a7794b4e50ff43d0670ce855baaf6a2e4" kindref="member">_logv</ref></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;ZERORUN_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-z&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1a116f45249ee60d4c7209bf4f43418653" kindref="member">_zerorun</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;MAXTHREADS_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-t<sp/>%d&apos;</highlight><highlight class="normal"><sp/>%<sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae1fd40b5f8803026a6caba6309e6e21f" kindref="member">_max_threads</ref>)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;SNC_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;--app<sp/>1&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1aea3145a4cefe2b4cf7c96cb0e4670616" kindref="member">_sleepncopy</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;--app<sp/>0&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;NUM_ISLANDS_PAR&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-s<sp/>%d&apos;</highlight><highlight class="normal"><sp/>%<sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1acf0ddeba657fc6f8e032121e58e68435" kindref="member">_num_islands</ref>)</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;ALL_NICS&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-u&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1ae961904f66cb0c6ae1c1b34aefe8b0b1" kindref="member">_all_nics</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pardict[</highlight><highlight class="stringliteral">&apos;CHECK_WITH_SESSION&apos;</highlight><highlight class="normal">]<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;-S&apos;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient_1af59363c727aa0e2ee352541778236826" kindref="member">_check_with_session</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&apos;&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_desc<sp/>=<sp/>sub_tpl.safe_substitute(pardict)</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>job_file<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;{0}/jobsub.sh&apos;</highlight><highlight class="normal">.format(lgdir)</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(job_file,<sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>jf:</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jf.write(job_desc)</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(os.path.join(lgdir,<sp/></highlight><highlight class="stringliteral">&apos;git_commit.txt&apos;</highlight><highlight class="normal">),<sp/></highlight><highlight class="stringliteral">&apos;w&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>gf:</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gf.write(git_commit)</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.chdir(lgdir)<sp/></highlight><highlight class="comment">#<sp/>so<sp/>that<sp/>slurm<sp/>logs<sp/>will<sp/>be<sp/>dumped<sp/>here</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(subprocess.check_output([</highlight><highlight class="stringliteral">&apos;sbatch&apos;</highlight><highlight class="normal">,<sp/>job_file]))</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair" kindref="compound">LogEntryPair</ref>(object):</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="230"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>name,<sp/>gstart,<sp/>gend):</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a128df0cdbcfe91e371240b6d3dd25a5b" kindref="member">_name</ref><sp/>=<sp/>name</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1aef20823f2fa614984c50e7d70712c6a3" kindref="member">_gstart</ref><sp/>=<sp/>gstart<sp/>+<sp/>2<sp/></highlight><highlight class="comment">#<sp/>group<sp/>0<sp/>is<sp/>the<sp/>whole<sp/>matching<sp/>line,<sp/>group<sp/>1<sp/>is<sp/>the<sp/>catchall</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1acbb21a6645370a19c31965892cc40ac7" kindref="member">_gend</ref><sp/>=<sp/>gend<sp/>+<sp/>2</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a1183628a4b07718485e3d1949c3818c8" kindref="member">_other</ref><sp/>=<sp/>dict()<sp/></highlight><highlight class="comment">#<sp/>hack</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a13a1da22e295d1a8df1aefd2b23449d8" kindref="member">get_timestamp</ref>(self,<sp/>line):</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="241"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>microsecond<sp/>precision</highlight></codeline>
<codeline lineno="242"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sp<sp/>=<sp/>line.split()</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>date_time<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;{0}T{1}&apos;</highlight><highlight class="normal">.format(sp[0],<sp/>sp[1])</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;%Y-%m-%dT%H:%M:%S,%f&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>epoch<sp/>=<sp/>time.mktime(time.strptime(date_time,<sp/>pattern))</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>datetime.datetime.strptime(date_time,<sp/>pattern).microsecond<sp/>/<sp/>1e6<sp/>+<sp/>epoch</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">check_start(self,<sp/>match,<sp/>line):</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>match.group(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1aef20823f2fa614984c50e7d70712c6a3" kindref="member">_gstart</ref>):</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref><sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a13a1da22e295d1a8df1aefd2b23449d8" kindref="member">get_timestamp</ref>(line)</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">check_end(self,<sp/>match,<sp/>line):</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>match.group(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1acbb21a6645370a19c31965892cc40ac7" kindref="member">_gend</ref>):</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a13a1da22e295d1a8df1aefd2b23449d8" kindref="member">get_timestamp</ref>(line)</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a128df0cdbcfe91e371240b6d3dd25a5b" kindref="member">_name</ref><sp/>==<sp/></highlight><highlight class="stringliteral">&apos;unroll&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a1183628a4b07718485e3d1949c3818c8" kindref="member">_other</ref>[</highlight><highlight class="stringliteral">&apos;num_drops&apos;</highlight><highlight class="normal">]<sp/>=<sp/>int(line.split()[-1])</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a128df0cdbcfe91e371240b6d3dd25a5b" kindref="member">_name</ref><sp/>==<sp/></highlight><highlight class="stringliteral">&apos;node<sp/>managers&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a1183628a4b07718485e3d1949c3818c8" kindref="member">_other</ref>[</highlight><highlight class="stringliteral">&apos;num_node_mgrs&apos;</highlight><highlight class="normal">]<sp/>=<sp/>int(line.split(</highlight><highlight class="stringliteral">&apos;Got<sp/>a<sp/>node<sp/>list<sp/>with&apos;</highlight><highlight class="normal">)[1].split()[0])</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a128df0cdbcfe91e371240b6d3dd25a5b" kindref="member">_name</ref><sp/>==<sp/></highlight><highlight class="stringliteral">&apos;build<sp/>drop<sp/>connections&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a1183628a4b07718485e3d1949c3818c8" kindref="member">_other</ref>[</highlight><highlight class="stringliteral">&apos;num_edges&apos;</highlight><highlight class="normal">]<sp/>=<sp/>int(line.split()[-4][1:-1])</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">get_duration(self):</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)):</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#print<sp/>&quot;Cannot<sp/>calc<sp/>duration<sp/>for<sp/>&apos;{0}&apos;:<sp/>start_time:{1},<sp/>end_time:{2}&quot;.format(self._name,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#self._start_time,<sp/>self._end_time)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/>-<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref>)</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">reset(self):</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1ac0f0a10080e0ede663409ab54df76af4" kindref="member">_start_time</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair_1a3f644a4c7f81507d56dd70ed408dcee2" kindref="member">_end_time</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275" refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser" kindref="compound">LogParser</ref>(object):</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="277"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Given<sp/>the<sp/>log<sp/>dir,<sp/>analyse<sp/>all<sp/>DIM<sp/>and<sp/>NMs<sp/>logs,<sp/>and<sp/>store<sp/>the<sp/>resuls</highlight></codeline>
<codeline lineno="278"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>in<sp/>CSV,<sp/>which<sp/>has<sp/>the<sp/>following<sp/>fields:</highlight></codeline>
<codeline lineno="279"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>====================================</highlight></codeline>
<codeline lineno="280"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>0.<sp/><sp/>user<sp/>name<sp/>(e.g.<sp/>cwu)</highlight></codeline>
<codeline lineno="281"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>1.<sp/><sp/>facility<sp/>(e.g.<sp/>galaxy)</highlight></codeline>
<codeline lineno="282"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>2.<sp/><sp/>pipeline<sp/>(e.g.<sp/>lofar_std)</highlight></codeline>
<codeline lineno="283"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>3.<sp/><sp/>time<sp/>(e.g.<sp/>2016-08-22T11-52-11/)</highlight></codeline>
<codeline lineno="284"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>4.<sp/><sp/>#<sp/>of<sp/>nodes</highlight></codeline>
<codeline lineno="285"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>5.<sp/><sp/>#<sp/>of<sp/>drops</highlight></codeline>
<codeline lineno="286"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>6.<sp/><sp/>Git<sp/>commit<sp/>number</highlight></codeline>
<codeline lineno="287"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>7.<sp/><sp/>unroll_time</highlight></codeline>
<codeline lineno="288"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>8.<sp/><sp/>translation_time</highlight></codeline>
<codeline lineno="289"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>9.<sp/><sp/>pg_spec_gen_time</highlight></codeline>
<codeline lineno="290"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>10.<sp/>created_session_at_all_nodes_time</highlight></codeline>
<codeline lineno="291"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>11.<sp/>graph_separation_time</highlight></codeline>
<codeline lineno="292"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>12.<sp/>push_sub_graphs_to_all_nodes_time</highlight></codeline>
<codeline lineno="293"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>13.<sp/>created_drops_at_all_nodes_time</highlight></codeline>
<codeline lineno="294"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>14.<sp/>Num_pyro_connections_at_all_nodes</highlight></codeline>
<codeline lineno="295"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>15.<sp/>created_pyro_conn_at_all_nodes_time</highlight></codeline>
<codeline lineno="296"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>16.<sp/>triggered_drops_at_all_nodes_time</highlight></codeline>
<codeline lineno="297"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>17.<sp/>Total<sp/>completion<sp/>time</highlight></codeline>
<codeline lineno="298"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="299"><highlight class="stringliteral"></highlight></codeline>
<codeline lineno="300"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>Detailed<sp/>description<sp/>of<sp/>each<sp/>field:</highlight></codeline>
<codeline lineno="301"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>https://confluence.icrar.uwa.edu.au/display/DALIUGE/Scalability+test#Scalabilitytest-Datacollection</highlight></codeline>
<codeline lineno="302"><highlight class="stringliteral"><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="303"><highlight class="normal"></highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/>dim_kl<sp/>=<sp/>[</highlight><highlight class="stringliteral">&apos;Start<sp/>to<sp/>unroll&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Unroll<sp/>completed<sp/>for<sp/>{0}<sp/>with<sp/>#<sp/>of<sp/>Drops&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Start<sp/>to<sp/>translate&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Translation<sp/>completed<sp/>for&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;PG<sp/>spec<sp/>is<sp/>calculated&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Creating<sp/>Session<sp/>{0}<sp/>in<sp/>all<sp/>hosts&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Successfully<sp/>created<sp/>session<sp/>{0}<sp/>in<sp/>all<sp/>hosts&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Separating<sp/>graph&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Removed<sp/>(and<sp/>sanitized)<sp/>{0}<sp/>inter-dm<sp/>relationships&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Adding<sp/>individual<sp/>graphSpec<sp/>of<sp/>session<sp/>{0}<sp/>to<sp/>each<sp/>DM&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Successfully<sp/>added<sp/>individual<sp/>graphSpec<sp/>of<sp/>session<sp/>{0}<sp/>to<sp/>each<sp/>DM&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Deploying<sp/>Session<sp/>{0}<sp/>in<sp/>all<sp/>hosts&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Successfully<sp/>deployed<sp/>session<sp/>{0}<sp/>in<sp/>all<sp/>hosts&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Establishing<sp/>{0}<sp/>drop<sp/>relationships&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Established<sp/>all<sp/>drop<sp/>relationships<sp/>{0}<sp/>in&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Moving<sp/>Drops<sp/>to<sp/>COMPLETED<sp/>right<sp/>away&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Successfully<sp/>triggered<sp/>drops&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Got<sp/>a<sp/>node<sp/>list<sp/>with<sp/>{0}<sp/>node<sp/>managers&apos;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="322"><highlight class="normal"></highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>nm_kl<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Starting<sp/>Pyro4<sp/>Daemon<sp/>for<sp/>session&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="comment">#<sp/>Logged<sp/>by<sp/>the<sp/>old<sp/>master<sp/>branch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Creating<sp/>DROPs<sp/>for<sp/>session&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Drops<sp/>are<sp/>being<sp/>created</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Session<sp/>{0}<sp/>is<sp/>now<sp/>RUNNING&apos;</highlight><highlight class="normal">,<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>All<sp/>drops<sp/>created<sp/>and<sp/>ready</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;Session<sp/>{0}<sp/>finished&apos;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>All<sp/>drops<sp/>executed</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="329"><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>kwords<sp/>=<sp/>dict()</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>kwords[</highlight><highlight class="stringliteral">&apos;dim&apos;</highlight><highlight class="normal">]<sp/>=<sp/>dim_kl</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>kwords[</highlight><highlight class="stringliteral">&apos;nm&apos;</highlight><highlight class="normal">]<sp/>=<sp/>nm_kl</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">__init__(self,<sp/>log_dir):</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a39de6c4970d6a5b25ea46b51517a698b" kindref="member">_dim_log_f</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1ab7df9e121bd62088216229cd91ed9892" kindref="member">check_log_dir</ref>(log_dir)):</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&quot;No<sp/>DIM<sp/>log<sp/>found<sp/>at:<sp/>{0}&quot;</highlight><highlight class="normal">.format(log_dir))</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref><sp/>=<sp/>log_dir</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a6b47370c74a8a00ffeb70c1ce66e1e91" kindref="member">_dim_catchall_pattern</ref><sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a4fdeaac4e0d9ea48bff7849915d05a7d" kindref="member">construct_catchall_pattern</ref>(node_type=</highlight><highlight class="stringliteral">&apos;dim&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a2090e06ebad42e28784f8f8b1aa7d350" kindref="member">_nm_catchall_pattern</ref><sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a4fdeaac4e0d9ea48bff7849915d05a7d" kindref="member">construct_catchall_pattern</ref>(node_type=</highlight><highlight class="stringliteral">&apos;nm&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">build_dim_log_entry_pairs(self):</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair" kindref="compound">LogEntryPair</ref>(name,<sp/>g1,<sp/>g2)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name,<sp/>g1,<sp/>g2<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;unroll&apos;</highlight><highlight class="normal">,<sp/>0,<sp/>1),</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;translate&apos;</highlight><highlight class="normal">,<sp/>2,<sp/>3),</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;gen<sp/>pg<sp/>spec&apos;</highlight><highlight class="normal">,<sp/>3,<sp/>4),</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;create<sp/>session&apos;</highlight><highlight class="normal">,<sp/>5,<sp/>6),</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;separate<sp/>graph&apos;</highlight><highlight class="normal">,<sp/>7,<sp/>8),</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;add<sp/>session<sp/>to<sp/>all&apos;</highlight><highlight class="normal">,<sp/>9,<sp/>10),</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;deploy<sp/>session<sp/>to<sp/>all&apos;</highlight><highlight class="normal">,<sp/>11,<sp/>12),</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;build<sp/>drop<sp/>connections&apos;</highlight><highlight class="normal">,<sp/>13,<sp/>14),</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;trigger<sp/>drops&apos;</highlight><highlight class="normal">,<sp/>15,<sp/>16),</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;node<sp/>managers&apos;</highlight><highlight class="normal">,<sp/>17,<sp/>17),</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)]</highlight></codeline>
<codeline lineno="355"><highlight class="normal"></highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">build_nm_log_entry_pairs(self):</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>[<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogEntryPair" kindref="compound">LogEntryPair</ref>(name,<sp/>g1,<sp/>g2)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>name,<sp/>g1,<sp/>g2<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;completion_time_old&apos;</highlight><highlight class="normal">,<sp/>0,<sp/>3),<sp/></highlight><highlight class="comment">#<sp/>Old<sp/>master<sp/>branch</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;completion_time&apos;</highlight><highlight class="normal">,<sp/>2,<sp/>3),</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="stringliteral">&apos;node_deploy_time&apos;</highlight><highlight class="normal">,<sp/>1,<sp/>2),</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)]</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">construct_catchall_pattern(self,<sp/>node_type):</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pattern_strs<sp/>=<sp/>LogParser.kwords.get(node_type)</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>patterns<sp/>=<sp/>[x.format(</highlight><highlight class="stringliteral">&apos;.*&apos;</highlight><highlight class="normal">).replace(</highlight><highlight class="stringliteral">&apos;(&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">r&apos;\(&apos;</highlight><highlight class="normal">).replace(</highlight><highlight class="stringliteral">&apos;)&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">r&apos;\)&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>pattern_strs]</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>catchall<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;|&apos;</highlight><highlight class="normal">.join([</highlight><highlight class="stringliteral">&apos;(%s)&apos;</highlight><highlight class="normal"><sp/>%<sp/>(s,)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>s<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>patterns])</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>catchall<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;.*(%s).*&quot;</highlight><highlight class="normal"><sp/>%<sp/>(catchall,)</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>re.compile(catchall)</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a6cde5637fc86af58e7eb1ce0c57798b3" kindref="member">parse</ref>(self,<sp/>out_csv=None):</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;&quot;&quot;</highlight></codeline>
<codeline lineno="372"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>e.g.<sp/>lofar_std_N4_2016-08-22T11-52-11</highlight></codeline>
<codeline lineno="373"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&quot;&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logb_name<sp/>=<sp/>os.path.basename(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ss<sp/>=<sp/>re.search(</highlight><highlight class="stringliteral">&apos;_N[0-9]+_&apos;</highlight><highlight class="normal">,<sp/>logb_name)</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ss<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">raise</highlight><highlight class="normal"><sp/>Exception(</highlight><highlight class="stringliteral">&quot;Invalid<sp/>log<sp/>directory:<sp/>{0}&quot;</highlight><highlight class="normal">.format(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>))</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>delimit<sp/>=<sp/>ss.group(0)</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sp<sp/>=<sp/>logb_name.split(delimit)</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pip_name<sp/>=<sp/>sp[0]</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>do_date<sp/>=<sp/>sp[1]</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_nodes<sp/>=<sp/>int(delimit.split(</highlight><highlight class="stringliteral">&apos;_&apos;</highlight><highlight class="normal">)[1][1:])</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>user_name<sp/>=<sp/>pwd.getpwuid(os.stat(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a39de6c4970d6a5b25ea46b51517a698b" kindref="member">_dim_log_f</ref>[0]).st_uid).pw_name</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>gitf<sp/>=<sp/>os.path.join(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>,<sp/></highlight><highlight class="stringliteral">&apos;git_commit.txt&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(os.path.exists(gitf)):</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(gitf,<sp/></highlight><highlight class="stringliteral">&apos;r&apos;)<sp/>as<sp/>gf:</highlight></codeline>
<codeline lineno="387"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>git_commit<sp/>=<sp/>gf.readline().strip()</highlight></codeline>
<codeline lineno="388"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>git_commit<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;None&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"></highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>parse<sp/>DIM<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dim_log_pairs<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1ad0876bf6b7b14fd03986fc55e7252050" kindref="member">build_dim_log_entry_pairs</ref>()</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lff<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a39de6c4970d6a5b25ea46b51517a698b" kindref="member">_dim_log_f</ref>:</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(lff,<sp/></highlight><highlight class="stringliteral">&quot;r&quot;)<sp/>as<sp/>dimlog:</highlight></codeline>
<codeline lineno="395"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dimlog:</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>self._dim_catchall_pattern.match(line)</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>m:</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dim_log_pairs:</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lep.check_start(m,<sp/>line)</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lep.check_end(m,<sp/>line)</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_drops<sp/>=<sp/>-1</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp_dim<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_node_mgrs<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>dim_log_pairs:</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>add_dur<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;unroll&apos;</highlight><highlight class="normal"><sp/>==<sp/>lep._name):</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_drops<sp/>=<sp/>lep._other.get(</highlight><highlight class="stringliteral">&apos;num_drops&apos;</highlight><highlight class="normal">,<sp/>-1)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;node<sp/>managers&apos;</highlight><highlight class="normal"><sp/>==<sp/>lep._name):</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_node_mgrs<sp/>=<sp/>lep._other.get(</highlight><highlight class="stringliteral">&apos;num_node_mgrs&apos;</highlight><highlight class="normal">,<sp/>0)</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>add_dur<sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;build<sp/>drop<sp/>connections&apos;</highlight><highlight class="normal"><sp/>==<sp/>lep._name):</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_edges<sp/>=<sp/>lep._other.get(</highlight><highlight class="stringliteral">&apos;num_edges&apos;</highlight><highlight class="normal">,<sp/>-1)</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp_dim.append(str(num_edges))</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(add_dur):</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp_dim.append(str(lep.get_duration()))</highlight></codeline>
<codeline lineno="418"><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>parse<sp/>NM<sp/>logs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_logs<sp/>=<sp/>[]</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_node_deploy_time<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_finished_sess<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="423"><highlight class="normal"></highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_dims<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>df<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.listdir(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>):</highlight></codeline>
<codeline lineno="426"><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Check<sp/>this<sp/>is<sp/>a<sp/>dir<sp/>and<sp/>contains<sp/>the<sp/>NM<sp/>log</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.isdir(os.path.join(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>,<sp/>df)):</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_logf<sp/>=<sp/>os.path.join(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>,<sp/>df,<sp/></highlight><highlight class="stringliteral">&apos;dlgNM.log&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_dim_logf<sp/>=<sp/>os.path.join(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>,<sp/>df,<sp/></highlight><highlight class="stringliteral">&apos;dlgDIM.log&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_mm_logf<sp/>=<sp/>os.path.join(self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a0629236f0b40ccce113cee225cdfff65" kindref="member">_log_dir</ref>,<sp/>df,<sp/></highlight><highlight class="stringliteral">&apos;dlgMM.log&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(nm_logf):</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(os.path.exists(nm_dim_logf)<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>os.path.exists(nm_mm_logf)):</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_dims<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Start<sp/>anew<sp/>every<sp/>time</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_log_pairs<sp/>=<sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1af3f9f081736d651eb23bc83a42654622" kindref="member">build_nm_log_entry_pairs</ref>()</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nm_logs.append(nm_log_pairs)</highlight></codeline>
<codeline lineno="441"><highlight class="normal"></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Read<sp/>NM<sp/>log<sp/>and<sp/>fill<sp/>all<sp/>LogPair<sp/>objects</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(nm_logf,<sp/></highlight><highlight class="stringliteral">&quot;r&quot;)<sp/>as<sp/>nmlog:</highlight></codeline>
<codeline lineno="444"><highlight class="stringliteral"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>line<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nmlog:</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>m<sp/>=<sp/>self._nm_catchall_pattern.match(line)</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>m:</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nm_log_pairs:</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lep.check_start(m,<sp/>line)</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lep.check_end(m,<sp/>line)</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Looking<sp/>for<sp/>the<sp/>deployment<sp/>times<sp/>and<sp/>counting<sp/>for<sp/>finished<sp/>sessions</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nm_log_pairs:</highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Consider<sp/>only<sp/>valid<sp/>durations</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dur<sp/>=<sp/>lep.get_duration()</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dur<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="459"><highlight class="normal"></highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>lep._name<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(</highlight><highlight class="stringliteral">&apos;completion_time&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;completion_time_old&apos;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_finished_sess<sp/>+=<sp/>1</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>lep._name<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;node_deploy_time&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>dur<sp/>&gt;<sp/>max_node_deploy_time:</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_node_deploy_time<sp/>=<sp/>dur</highlight></codeline>
<codeline lineno="465"><highlight class="normal"></highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>theory_num_nm<sp/>=<sp/>num_nodes<sp/>-<sp/>num_dims</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>actual_num_nm<sp/>=<sp/>num_node_mgrs<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>theory_num_nm</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>actual_num_nm<sp/>!=<sp/>num_finished_sess:</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Pipeline<sp/>%s<sp/>is<sp/>not<sp/>complete:<sp/>%d<sp/>!=<sp/>%d.&quot;</highlight><highlight class="normal"><sp/>%<sp/>(pip_name,<sp/>actual_num_nm,<sp/>num_finished_sess))</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>failed_nodes<sp/>=<sp/>theory_num_nm<sp/>-<sp/>actual_num_nm</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_nodes<sp/>-=<sp/>failed_nodes</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(failed_nodes<sp/>&gt;<sp/>0):</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Pipeline<sp/>%s<sp/>has<sp/>%d<sp/>node<sp/>managers<sp/>that<sp/>failed<sp/>to<sp/>start!&quot;</highlight><highlight class="normal"><sp/>%<sp/>(pip_name,<sp/>failed_nodes))</highlight></codeline>
<codeline lineno="476"><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>The<sp/>DIM<sp/>waits<sp/>for<sp/>all<sp/>NMs<sp/>to<sp/>setup<sp/>before<sp/>triggering<sp/>the<sp/>first<sp/>drops.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>has<sp/>the<sp/>effect<sp/>that<sp/>the<sp/>slowest<sp/>to<sp/>setup<sp/>will<sp/>make<sp/>the<sp/>others</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>idle<sp/>while<sp/>already<sp/>in<sp/>RUNNING<sp/>state,<sp/>effectively<sp/>increasing<sp/>their</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>&quot;exec_time&quot;.<sp/>We<sp/>subtract<sp/>the<sp/>maximum<sp/>deploy<sp/>time<sp/>to<sp/>account<sp/>for<sp/>this</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>effect</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_exec_time<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>log_entry_pairs<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nm_logs:</highlight></codeline>
<codeline lineno="484"><highlight class="normal"></highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>indexed_leps<sp/>=<sp/>{lep._name:<sp/>lep<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>lep<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>log_entry_pairs}</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>deploy_time<sp/>=<sp/>indexed_leps[</highlight><highlight class="stringliteral">&apos;node_deploy_time&apos;</highlight><highlight class="normal">].get_duration()</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(deploy_time<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):<sp/></highlight><highlight class="comment">#<sp/>since<sp/>some<sp/>node<sp/>managers<sp/>failed<sp/>to<sp/>start</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>exec_time<sp/>=<sp/>indexed_leps[</highlight><highlight class="stringliteral">&apos;completion_time&apos;</highlight><highlight class="normal">].get_duration()<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>indexed_leps[</highlight><highlight class="stringliteral">&apos;completion_time_old&apos;</highlight><highlight class="normal">].get_duration()</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(exec_time<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>real_exec_time<sp/>=<sp/>exec_time<sp/>-<sp/>(max_node_deploy_time<sp/>-<sp/>deploy_time)</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>real_exec_time<sp/>&gt;<sp/>max_exec_time:</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>max_exec_time<sp/>=<sp/>real_exec_time</highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temp_nm<sp/>=<sp/>[str(max_exec_time)]</highlight></codeline>
<codeline lineno="497"><highlight class="normal"></highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>[user_name,<sp/>socket.gethostname().split(</highlight><highlight class="stringliteral">&apos;-&apos;</highlight><highlight class="normal">)[0],<sp/>pip_name,<sp/>do_date,</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_nodes,<sp/>num_drops,<sp/>git_commit]</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ret<sp/>=<sp/>[str(x)<sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>x<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>ret]</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_dims<sp/>=<sp/>num_dims<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>num_dims<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>num_dims<sp/>-<sp/>1<sp/></highlight><highlight class="comment">#exclude<sp/>master<sp/>manager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>add_line<sp/>=<sp/></highlight><highlight class="stringliteral">&apos;,&apos;</highlight><highlight class="normal">.join(ret<sp/>+<sp/>temp_dim<sp/>+<sp/>temp_nm<sp/>+<sp/>[str(int(num_dims))])</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_csv<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>with<sp/>open(out_csv,<sp/></highlight><highlight class="stringliteral">&apos;a&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>of:</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>of.write(add_line)</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>of.write(os.linesep)</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(add_line)</highlight></codeline>
<codeline lineno="509"><highlight class="normal"></highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal">check_log_dir(self,<sp/>log_dir):</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>possible_logs<sp/>=<sp/>[</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.path.join(log_dir,<sp/></highlight><highlight class="stringliteral">&apos;0&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;dlgDIM.log&apos;</highlight><highlight class="normal">),</highlight></codeline>
<codeline lineno="513"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>os.path.join(log_dir,<sp/></highlight><highlight class="stringliteral">&apos;0&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;dlgMM.log&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>]</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>dim_log_f<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>possible_logs:</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(os.path.exists(dim_log_f)):</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser_1a39de6c4970d6a5b25ea46b51517a698b" kindref="member">_dim_log_f</ref><sp/>=<sp/>[dim_log_f]</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dim_log_f<sp/>==<sp/>possible_logs[0]):</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cluster_log<sp/>=<sp/>os.path.join(log_dir,<sp/></highlight><highlight class="stringliteral">&apos;0&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;start_dlg_cluster.log&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(os.path.exists(cluster_log)):</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self._dim_log_f.append(cluster_log)</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>parser<sp/>=<sp/>optparse.OptionParser()</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-a&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--action&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;action&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;1<sp/>-<sp/>submit<sp/>job,<sp/>2<sp/>-<sp/>analyse<sp/>log&quot;</highlight><highlight class="normal">,<sp/>default=1)</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-l&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--log-root&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;log_root&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;The<sp/>root<sp/>directory<sp/>of<sp/>the<sp/>log<sp/>file&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-d&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--log-dir&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;log_dir&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;The<sp/>directory<sp/>of<sp/>the<sp/>log<sp/>file<sp/>for<sp/>parsing&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-L&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--logical-graph&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;string&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;logical_graph&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;The<sp/>filename<sp/>of<sp/>the<sp/>logical<sp/>graph<sp/>to<sp/>deploy&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-P&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--physical-graph&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;string&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;physical_graph&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;The<sp/>filename<sp/>of<sp/>the<sp/>physical<sp/>graph<sp/>(template)<sp/>to<sp/>deploy&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keywordtype">None</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-t&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--job-dur&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;job_dur&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;job<sp/>duration<sp/>in<sp/>minutes&quot;</highlight><highlight class="normal">,<sp/>default=30)</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-n&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--num_nodes&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="541"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;num_nodes&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;number<sp/>of<sp/>compute<sp/>nodes<sp/>requested&quot;</highlight><highlight class="normal">,<sp/>default=5)</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&apos;-i&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;--graph_vis&apos;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&apos;store_true&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&apos;graph_vis&apos;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&apos;Whether<sp/>to<sp/>visualise<sp/>graph<sp/>(poll<sp/>status)&apos;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&apos;-p&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;--run_proxy&apos;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&apos;store_true&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&apos;run_proxy&apos;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&apos;Whether<sp/>to<sp/>attach<sp/>proxy<sp/>server<sp/>for<sp/>real-time<sp/>monitoring&apos;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-m&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--monitor_host&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;string&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;mon_host&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Monitor<sp/>host<sp/>IP<sp/>(optional)&quot;</highlight><highlight class="normal">,<sp/>default=default_aws_mon_host)</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-o&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--monitor_port&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;mon_port&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;The<sp/>port<sp/>to<sp/>bind<sp/>DALiuGE<sp/>monitor&quot;</highlight><highlight class="normal">,<sp/>default=default_aws_mon_port)</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-v&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--verbose-level&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;verbose_level&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Verbosity<sp/>level<sp/>(1-3)<sp/>of<sp/>the<sp/>DIM/NM<sp/>logging&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>default=1)</highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-c&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--csvoutput&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;csv_output&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;CSV<sp/>output<sp/>file<sp/>to<sp/>keep<sp/>the<sp/>log<sp/>analysis<sp/>result&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-z&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--zerorun&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store_true&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;zerorun&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Generate<sp/>a<sp/>physical<sp/>graph<sp/>that<sp/>takes<sp/>no<sp/>time<sp/>to<sp/>run&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-y&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--sleepncopy&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store_true&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;sleepncopy&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Whether<sp/>include<sp/>COPY<sp/>in<sp/>the<sp/>default<sp/>Component<sp/>drop&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-T&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--max-threads&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store&quot;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&quot;int&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;max_threads&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Max<sp/>thread<sp/>pool<sp/>size<sp/>used<sp/>for<sp/>executing<sp/>drops.<sp/>0<sp/>(default)<sp/>means<sp/>no<sp/>pool.&quot;</highlight><highlight class="normal">,<sp/>default=0)</highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&apos;-s&apos;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&apos;--num_islands&apos;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&apos;store&apos;</highlight><highlight class="normal">,<sp/>type=</highlight><highlight class="stringliteral">&apos;int&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&apos;num_islands&apos;</highlight><highlight class="normal">,<sp/>default=1,<sp/>help=</highlight><highlight class="stringliteral">&apos;The<sp/>number<sp/>of<sp/>Data<sp/>Islands&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-u&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--all_nics&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store_true&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;all_nics&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Listen<sp/>on<sp/>all<sp/>NICs<sp/>for<sp/>a<sp/>node<sp/>manager&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>parser.add_option(</highlight><highlight class="stringliteral">&quot;-S&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;--check_with_session&quot;</highlight><highlight class="normal">,<sp/>action=</highlight><highlight class="stringliteral">&quot;store_true&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dest=</highlight><highlight class="stringliteral">&quot;check_with_session&quot;</highlight><highlight class="normal">,<sp/>help=</highlight><highlight class="stringliteral">&quot;Check<sp/>for<sp/>node<sp/>managers&apos;<sp/>availability<sp/>by<sp/>creating/destroy<sp/>a<sp/>session&quot;</highlight><highlight class="normal">,<sp/>default=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/>(opts,<sp/>args)<sp/>=<sp/>parser.parse_args(sys.argv)</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opts.action<sp/>==<sp/>2):</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opts.log_dir<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>you<sp/>can<sp/>specify:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>either<sp/>a<sp/>single<sp/>directory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(opts.log_root<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facility<sp/>=<sp/>socket.gethostname().split(</highlight><highlight class="stringliteral">&apos;-&apos;</highlight><highlight class="normal">)[0]</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>config<sp/>=<sp/>ConfigFactory.create_config(facility=facility)</highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log_root<sp/>=<sp/>config.getpar(</highlight><highlight class="stringliteral">&apos;log_root&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>log_root<sp/>=<sp/>opts.log_root</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(log_root<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(log_root))):</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parser.error(</highlight><highlight class="stringliteral">&quot;Missing<sp/>or<sp/>invalid<sp/>log<sp/>directory/facility<sp/>for<sp/>log<sp/>analysis&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>or<sp/>a<sp/>root<sp/>log<sp/>directory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>df<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>os.listdir(log_root):</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>df<sp/>=<sp/>os.path.join(log_root,<sp/>df)</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(os.path.isdir(df)):</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lg<sp/>=<sp/><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser" kindref="compound">LogParser</ref>(df)</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lg.parse(out_csv=opts.csv_output)</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">except</highlight><highlight class="normal"><sp/>Exception<sp/></highlight><highlight class="keyword">as</highlight><highlight class="normal"><sp/>exp:</highlight></codeline>
<codeline lineno="590"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Fail<sp/>to<sp/>parse<sp/>{0}:<sp/>{1}&quot;</highlight><highlight class="normal">.format(df,<sp/>exp))</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lg<sp/>=<sp/><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1LogParser" kindref="compound">LogParser</ref>(opts.log_dir)</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lg.parse(out_csv=opts.csv_output)</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>(opts.action<sp/>==<sp/>1):</highlight></codeline>
<codeline lineno="595"><highlight class="normal"></highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>opts.logical_graph<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>opts.physical_graph:</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parser.error(</highlight><highlight class="stringliteral">&quot;Either<sp/>a<sp/>logical<sp/>graph<sp/>or<sp/>physical<sp/>graph<sp/>filename<sp/>must<sp/>be<sp/>specified&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>(opts.logical_graph,<sp/>opts.physical_graph):</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>p<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>os.path.exists(p):</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parser.error(</highlight><highlight class="stringliteral">&quot;Cannot<sp/>locate<sp/>graph<sp/>file<sp/>at<sp/>&apos;{0}&apos;&quot;</highlight><highlight class="normal">.format(p))</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pc<sp/>=<sp/><ref refid="classdlg_1_1deploy_1_1pawsey_1_1scale__test_1_1PawseyClient" kindref="compound">PawseyClient</ref>(job_dur=opts.job_dur,<sp/>num_nodes=opts.num_nodes,<sp/>logv=opts.verbose_level,</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>zerorun=opts.zerorun,<sp/>max_threads=opts.max_threads,</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>run_proxy=opts.run_proxy,<sp/>mon_host=opts.mon_host,<sp/>mon_port=opts.mon_port,</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>num_islands=opts.num_islands,<sp/>all_nics=opts.all_nics,</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>check_with_session=opts.check_with_session,</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lg=opts.logical_graph,<sp/>pg=opts.physical_graph)</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pc._graph_vis<sp/>=<sp/>opts.graph_vis</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pc.submit_job()</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>parser.error(</highlight><highlight class="stringliteral">&quot;Invalid<sp/>action<sp/>-a&quot;</highlight><highlight class="normal">)</highlight></codeline>
    </programlisting>
    <location file="daliuge-runtime/dlg/deploy/pawsey/scale_test.py"/>
  </compounddef>
</doxygen>
